"use strict";var vm=new Vue({el:"#app",data:{produtos:[],produto:!1,carrinho:[],mensagemAlerta:"Item Adicionado",alertaAtivo:!1,carrinhoAtivo:!1},filters:{numeroPreco:function(o){return o.toLocaleString("EU",{style:"currency",currency:"EUR"})}},computed:{carrinhoTotal:function(){var t=0;return this.carrinho.length&&this.carrinho.forEach(function(o){t+=o.preco}),t}},methods:{fetchProdutos:function(){var t=this;fetch("./api/produtos.json").then(function(o){return o.json()}).then(function(o){t.produtos=o})},fetchProduto:function(o){var t=this;fetch("./api/produtos/".concat(o,"/dados.json")).then(function(o){return o.json()}).then(function(o){t.produto=o})},abrirModal:function(o){this.fetchProduto(o),window.scrollTo({top:0,behavior:"smooth"})},fecharModal:function(o){console.log(o.target),console.log(o.currentTarget),o.target===o.currentTarget&&(this.produto=!1)},clickForaCarrinho:function(o){o.target===o.currentTarget&&(this.carrinhoAtivo=!1)},adicionarItem:function(){this.produto.estoque--;var o=this.produto,t=o.id,r=o.nome,o=o.preco;this.carrinho.push({id:t,nome:r,preco:o}),this.alerta("".concat(r," foi adicionado ao carrinho"))},removerItem:function(){this.carrinho.splice(0,1)},checarLocalStorage:function(){window.localStorage.carrinho&&(this.carrinho=JSON.parse(window.localStorage.carrinho))},compararEstoque:function(){var t=this,o=this.carrinho.filter(function(o){if(console.log(o.id),o.id===t.produto.id)return!0});this.produto.estoque=this.produto.estoque-o.length},alerta:function(o){var t=this;this.mensagemAlerta=o,this.alertaAtivo=!0,setTimeout(function(){t.alertaAtivo=!1},1500)},router:function(){var o=document.location.hash;o&&this.fetchProduto(o.replace("#",""))}},watch:{carrinho:function(){window.localStorage.carrinho=JSON.stringify(this.carrinho)},produto:function(){document.title=this.produto.nome||"Techno";var o=this.produto.id||"";history.pushState(null,null,"#".concat(o)),this.produto&&this.compararEstoque()}},created:function(){this.fetchProdutos(),this.checarLocalStorage(),this.router()}});